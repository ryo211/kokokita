# 設計書 (Design Documents)

## 概要

このディレクトリには、kokokitaプロジェクトの機能設計書を格納します。**気軽に作成・更新できる**ことを重視し、常に実装と同期した状態を保つことを目的とします。

## 目的

- 実装内容を記録し、チームメンバー間で共有する
- 機能の仕様を文書化し、将来の参考とする
- 実装と設計を常に同期させ、ドキュメントを生きた状態に保つ
- 複雑な機能の理解を助ける

## 重要な方針

**形式よりも内容を優先**: 完璧な文書を作ることよりも、情報が最新であることを重視します。気軽に作成・更新してください。

## 設計書を作成すべき場合

以下のような場合には設計書を作成することを推奨します：

- 新しい画面や大きな機能の追加
- 複数のコンポーネントにまたがる変更
- UIフローの追加や変更
- データモデルの追加や大きな変更
- 外部APIやサービスとの統合
- 既存機能の大規模なリファクタリング
- 複雑なビジネスロジックの実装

## 命名規則

```
機能名.md
```

例:
```
訪問記録一覧画面.md
写真添付機能.md
POI検索機能リファクタリング.md
```

## 設計書の種類

### 画面設計書
新しい画面やUI変更の設計

### 機能設計書
新機能やビジネスロジックの設計

### データモデル設計書
データ構造やCore Dataモデルの設計

### API設計書
外部APIやサービスとの統合設計

## 作成・更新の流れ

**気軽に始める**: 完璧を目指さず、まず書き始めることが重要です。

1. **作成**
   - `template.md`をコピーして新しいファイルを作成
   - 必要な部分から埋めていく（すべてのセクションを埋める必要はありません）
   - 図が必要ならmermaidを使用

2. **実装と並行して更新**
   - 実装しながら設計書を更新する
   - 設計が変わったら気軽に書き直す
   - コードと設計書が常に同期している状態を保つ

3. **完成後も継続更新**
   - リファクタリングや機能追加時に設計書も更新
   - 古くなった情報は削除または更新

## ディレクトリ構造

```
doc/design/
├── README.md (このファイル)
├── template.md (テンプレート)
└── 機能名.md (個別の設計書)
```

## 更新のヒント

実装と設計書の同期を保つために：

- **こまめに更新**: 実装を変更したらすぐに設計書も更新する習慣をつける
- **変更理由を残す**: なぜ変更したかを簡単にメモしておくと後で役立つ
- **不要な部分は削除**: 古くなった情報は思い切って削除する
- **大きな変更はADRで**: アーキテクチャに影響する決定はADRとして記録を検討

## 記載時に意識すること

設計書を書く際は以下を意識すると良いでしょう：

- **UIとロジックの分離**: どこがUIでどこがビジネスロジックかを明確に
- **責務の明確化**: 各コンポーネントが何を担当するかを明示
- **既存コードとの整合性**: 既存のパターンに従っているかを確認
- **エッジケースの考慮**: 例外的なケースへの対応を記録

## 参考資料

- `CLAUDE.md`: プロジェクト全体のガイド
- `doc/architecture-guide.md`: アーキテクチャガイド（設計方針）
- `doc/implementation-guide.md`: 実装ガイド
- `doc/ADR/`: 技術的決定の記録