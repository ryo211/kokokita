# デモビデオ作成ガイド - ココキタ

## 概要

App Store審査のために、物理iOSデバイスでアプリが動作している様子を撮影したデモビデオが必要です。このガイドでは、審査要件を満たすデモビデオの作成手順を説明します。

## 審査要件

Apple の要求事項：
- **物理デバイスで撮影**: シミュレータ不可
- **「ココキタ」機能の動作を明示**: ボタンタップから記録保存までの一連の流れ
- **すべての権限リクエストを含める**: 位置情報許可ダイアログなど

## 準備

### 1. デバイスの準備

- **推奨デバイス**: iPhone（最新のiOSバージョン）
- **アプリの状態**: リリースビルドをインストール
- **初期状態**: アプリを一度削除して再インストール（初回起動時の権限ダイアログを表示させるため）

### 2. 画面収録の設定

```
設定アプリ > コントロールセンター > 画面収録を追加
```

コントロールセンターから画面収録を開始できるようにします。

## 撮影手順

### フロー概要

```
アプリ起動
↓
ホーム画面（空の状態）表示
↓
「ココキタ」ボタンをタップ
↓
【重要】位置情報許可ダイアログ表示 → 「Appの使用中は許可」をタップ
↓
位置情報取得中のインジケーター表示
↓
プロンプトシート表示（「そのまま保存」「情報を入力」「ココカモ」）
↓
「情報を入力」を選択
↓
編集画面でタイトル入力、写真追加（任意）
↓
「保存」ボタンをタップ
↓
ホーム画面に戻り、記録が追加されたことを確認
↓
記録をタップして詳細画面を表示
↓
地図が表示され、記録の詳細情報が確認できることを示す
```

### 詳細手順

#### ステップ1: 画面収録を開始

1. コントロールセンターを開く
2. 画面収録ボタンをタップ
3. 3秒のカウントダウン後、録画開始

#### ステップ2: アプリを起動

1. ホーム画面から「ココキタ」アプリアイコンをタップ
2. アプリが起動し、空のホーム画面が表示される
3. 2〜3秒待機（画面を確認できるように）

#### ステップ3: 「ココキタ」ボタンをタップ

1. 画面下部中央の青いボタン（「ココキタ」）をタップ
2. **【最重要】** 位置情報許可ダイアログが表示される
   - 「"ココキタ"の使用中に位置情報の利用を許可しますか？」
3. **「Appの使用中は許可」をタップ**（これを必ず画面収録に含める）

#### ステップ4: 位置情報取得中

1. 「位置情報を取得中...」のインジケーターが表示される
2. 数秒待機（リリースビルドでは実際の位置情報を取得）

#### ステップ5: プロンプトシート表示

1. 3つの選択肢が表示される：
   - 「そのまま保存」
   - 「情報を入力」
   - 「ココカモ」
2. **「情報を入力」をタップ**（編集機能をデモ）

#### ステップ6: 編集画面で情報を入力

1. タイトル欄に「テスト記録」などと入力
2. （任意）写真ボタンをタップして写真を追加
   - カメラまたはフォトライブラリから1枚追加
3. （任意）ラベル、グループ、メンバーを選択
4. 画面上部の「保存」ボタンをタップ

#### ステップ7: 保存確認

1. ホーム画面に戻る
2. 記録が1件追加されたことを確認
   - リストの最上部に新しい記録が表示される
3. 2〜3秒待機

#### ステップ8: 詳細画面を表示

1. 作成した記録をタップ
2. 詳細画面が表示される：
   - 地図（記録した位置にマーカー表示）
   - タイトル
   - 日時
   - 住所（取得できている場合）
   - 入力した情報（ラベル、グループ、写真など）
3. 画面をスクロールして、すべての情報が表示されることを確認

#### ステップ9: 画面収録を停止

1. コントロールセンターを開く
2. 画面収録ボタンをタップして停止
3. ビデオが写真アプリに保存される

## 撮影のポイント

### 必ず含めるべき内容

✅ **位置情報許可ダイアログ**（最重要）
- Apple は権限リクエストの動作を確認したい
- 初回起動時のダイアログを必ず収録

✅ **位置情報取得中のインジケーター**
- アプリが実際に位置情報を取得していることを示す

✅ **記録の保存と確認**
- データが正しく保存されることを示す

✅ **地図表示**
- 位置情報ベースのアプリであることを明示

### 撮影時の注意点

⚠️ **リリースビルドを使用**
- デバッグビルドでは位置情報偽装検出により動作しない可能性がある

⚠️ **実際の位置情報を使用**
- シミュレートされた位置情報は使用しない
- 実デバイスで実際の場所で撮影

⚠️ **適切な撮影時間**
- 約1〜2分程度のビデオ
- 早送りせず、各ステップを明確に示す

⚠️ **クリアな操作**
- タップやスワイプをゆっくり、はっきりと行う

## ビデオのアップロードと提出

### 1. ビデオの確認

撮影後、写真アプリでビデオを再生し、以下を確認：
- 位置情報許可ダイアログが含まれているか
- すべてのステップが明確に見えるか
- 音声は不要（画面のみでOK）

### 2. ビデオのアップロード

以下のいずれかの方法でアップロード：

#### オプションA: YouTube（限定公開）

1. YouTubeアプリまたはWebサイトにアクセス
2. ビデオをアップロード
3. 公開設定を「限定公開」に設定
4. URLをコピー

#### オプションB: Dropbox/Google Drive

1. Dropbox または Google Drive アプリを開く
2. ビデオをアップロード
3. 共有リンクを作成（閲覧権限のみ）
4. URLをコピー

### 3. App Store Connect での設定

1. App Store Connect にログイン
2. アプリを選択（ココキタ）
3. **「App情報」** セクションに移動
4. **「App Review情報」** を展開
5. **「メモ」** フィールドにビデオURLを貼り付け

```
デモビデオ:
https://youtu.be/xxxxx または https://dropbox.com/xxxxx

このビデオでは、物理デバイス（iPhone）で「ココキタ」機能を使用して
位置情報を記録する一連の流れを示しています。
位置情報許可ダイアログ、位置情報取得、データ保存、
地図表示のすべてのステップが含まれています。

なお、リリースビルドでは位置情報偽装検出が有効なため、
実際の位置情報を使用した実デバイスでのみ動作します。
```

6. 変更を保存

### 4. Resolution Center での返信

Apple からのメッセージに返信：

```
ご確認いただきありがとうございます。

デモビデオをApp Review情報セクションに追加いたしました：
[ビデオURL]

このビデオでは、物理デバイスで「ココキタ」機能が正常に動作する様子を
撮影しています。位置情報許可リクエストから記録保存までの
すべてのステップが含まれています。

また、プライバシー設定を見直し、非パーソナライズ広告のみを
使用するよう変更いたしました（Build 4として再提出予定）。

ご不明な点がございましたら、お知らせください。
```

## トラブルシューティング

### Q: 位置情報許可ダイアログが表示されない

**A**: アプリを削除して再インストールしてください。

```bash
# iPhoneでアプリを長押し → 削除
# Xcodeから再度インストール
```

### Q: 位置情報取得後にプロンプトシートが表示されない

**A**: リリースビルドで位置情報偽装検出が動作している可能性があります。
- 開発者ツールを無効化
- 実際の位置情報を使用
- デバイスを再起動

### Q: ビデオファイルが大きすぎる

**A**: 以下の方法でファイルサイズを削減：
- iMovieアプリで編集・圧縮
- 解像度を下げる（720p推奨）
- 不要な部分をトリミング

### Q: YouTube/Dropboxのアカウントがない

**A**: 以下の代替方法：
- iCloud Drive の共有リンク
- WeTransfer（無料、登録不要）
- ファイル転送サービス（Send Anywhere等）

## チェックリスト

撮影・提出前に確認：

- [ ] 物理デバイス（iPhone）で撮影
- [ ] リリースビルドを使用
- [ ] アプリを再インストール（初回起動状態）
- [ ] 画面収録を開始
- [ ] 位置情報許可ダイアログが表示され、許可をタップ
- [ ] 位置情報取得中のインジケーター表示
- [ ] プロンプトシート表示
- [ ] 編集画面で情報入力
- [ ] 保存ボタンをタップ
- [ ] ホーム画面で記録が追加されたことを確認
- [ ] 詳細画面で地図と情報を確認
- [ ] 画面収録を停止
- [ ] ビデオを確認（すべてのステップが含まれているか）
- [ ] YouTube/Dropboxにアップロード
- [ ] App Store Connect の App Review情報にURLを追加
- [ ] Resolution Center で返信

## まとめ

デモビデオは、Apple の審査担当者がアプリの動作を確認するための重要な資料です。特に「ココキタ」のような位置情報ベースのアプリでは、実デバイスでの動作を明確に示すことが求められます。

このガイドに従って撮影・提出することで、審査をスムーズに進めることができます。
